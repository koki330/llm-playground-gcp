# 複数ファイル添付機能 テストチェックリスト

## 📋 テスト実施ガイド

このチェックリストは、複数ファイル添付機能の包括的なテストを行うためのものです。
各項目をテストし、結果を記録してください。

---

## 1️⃣ 基本機能テスト

### 1.1 単一ファイル添付（後方互換性確認）
- [ ] **画像1枚のみ**を添付して送信できる
- [ ] **PDFファイル1つ**を添付して送信できる
- [ ] **Excelファイル1つ**を添付して送信できる
- [ ] **テキストファイル1つ**を添付して送信できる
- [ ] 添付ファイルのプレビューが正しく表示される
- [ ] 送信後、チャット履歴に画像が表示される

### 1.2 複数ファイル添付
- [ ] **画像2枚**を同時に添付して送信できる
- [ ] **画像3枚以上**を同時に添付して送信できる
- [ ] **画像2枚 + PDF 1つ**を同時に添付して送信できる
- [ ] **複数の異なるファイル形式**（PNG, JPEG, PDF, XLSX, TXT）を同時に添付できる
- [ ] 添付した全てのファイルがプレビューエリアに表示される
- [ ] 各ファイルに個別の削除ボタンが表示される

### 1.3 ファイル削除機能
- [ ] 添付したファイルを個別に削除できる
- [ ] 複数ファイルのうち1つだけを削除できる
- [ ] 全てのファイルを削除できる
- [ ] 削除後、残りのファイルが正しく表示される

---

## 2️⃣ モデル別テスト

### 2.1 GPTシリーズ

#### GPT-5.1
- [ ] 画像2枚を添付して質問できる
- [ ] 画像 + PDF を添付して質問できる
- [ ] 複数画像の内容を正しく認識できる
- [ ] 複数ファイルの内容を統合して回答できる

#### GPT-5
- [ ] 画像2枚を添付して質問できる
- [ ] 複数の異なるファイル形式を処理できる

#### GPT-5-mini
- [ ] 複数ファイル添付が動作する
- [ ] コストが正しく記録される

#### GPT-5-nano
- [ ] 複数ファイル添付が動作する
- [ ] 軽量モデルでも正しく処理される

#### O3（リーゾニングモデル）
- [ ] 複数ファイル添付が動作する
- [ ] Web検索OFF状態で動作する
- [ ] Web検索ON状態で動作する

#### GPT-4.1
- [ ] 複数ファイル添付が動作する
- [ ] 通常モデルとして正しく処理される

### 2.2 Claudeシリーズ

#### Claude Sonnet 4.5
- [ ] 画像2枚を添付して質問できる
- [ ] 画像 + PDF を添付して質問できる
- [ ] 複数画像の内容を正しく認識できる
- [ ] Anthropic SDKで正しく処理される

### 2.3 Geminiシリーズ

#### Gemini 3 Pro Preview
- [ ] 画像2枚を添付して質問できる
- [ ] 複数ファイルを処理できる
- [ ] Web検索OFF状態で動作する
- [ ] Web検索ON状態で動作する
- [ ] 思考レベル「高」で動作する
- [ ] 思考レベル「低」で動作する

#### Gemini 2.5 Pro
- [ ] 画像2枚を添付して質問できる
- [ ] 複数ファイルを処理できる
- [ ] Web検索OFF状態で動作する
- [ ] Web検索ON状態で動作する

#### Gemini 2.5 Flash
- [ ] 画像2枚を添付して質問できる
- [ ] 複数ファイルを処理できる
- [ ] Web検索OFF状態で動作する
- [ ] Web検索ON状態で動作する

---

## 3️⃣ Web検索機能との組み合わせ

### 3.1 GPT-5シリーズ + Web検索
- [ ] GPT-5.1: 複数ファイル添付 + Web検索ON
- [ ] GPT-5: 複数ファイル添付 + Web検索ON
- [ ] GPT-5-mini: 複数ファイル添付 + Web検索ON
- [ ] GPT-5-nano: 複数ファイル添付 + Web検索ON
- [ ] 画像の内容 + Web検索結果を統合した回答が得られる

### 3.2 Geminiシリーズ + Web検索
- [ ] Gemini 3 Pro Preview: 複数ファイル + Web検索ON
- [ ] Gemini 2.5 Pro: 複数ファイル + Web検索ON
- [ ] Gemini 2.5 Flash: 複数ファイル + Web検索ON
- [ ] Google検索の結果と画像内容が統合される

### 3.3 O3 + Web検索
- [ ] 複数ファイル添付 + Web検索ON
- [ ] Google Custom Search経由で検索が実行される
- [ ] 検索結果がリーゾニングに活用される

---

## 4️⃣ ファイル形式別テスト

### 4.1 画像ファイル
- [ ] **PNG** 複数枚を添付
- [ ] **JPEG** 複数枚を添付
- [ ] **GIF** 複数枚を添付
- [ ] **WebP** 複数枚を添付
- [ ] **PNG + JPEG** を同時添付
- [ ] **異なる解像度の画像**を複数添付

### 4.2 ドキュメントファイル
- [ ] **PDF** 複数を添付
- [ ] **Word (.docx)** 複数を添付
- [ ] **Excel (.xlsx)** 複数を添付
- [ ] **テキストファイル (.txt)** 複数を添付
- [ ] **JSON** 複数を添付

### 4.3 混合ファイル
- [ ] 画像2枚 + PDF 1つ
- [ ] 画像1枚 + Word 1つ + Excel 1つ
- [ ] 画像3枚 + テキスト1つ
- [ ] 全ての対応形式を同時に添付（5ファイル以上）

---

## 5️⃣ UI/UXテスト

### 5.1 プレビュー表示
- [ ] 添付ファイルリストが見やすく表示される
- [ ] ファイル名が長い場合に適切に省略される（truncate）
- [ ] 複数ファイルが縦に並んで表示される
- [ ] 画像ファイルのサムネイルが表示される（該当する場合）

### 5.2 削除ボタン
- [ ] 各ファイルの削除ボタンが見やすい
- [ ] 削除ボタンのホバー効果が動作する
- [ ] クリックで即座に削除される
- [ ] 削除後のUIが適切に更新される

### 5.3 送信ボタン
- [ ] ファイルのみで送信できる（テキスト入力なし）
- [ ] テキスト + ファイルで送信できる
- [ ] ファイル処理中は送信ボタンが無効化される
- [ ] 送信中に停止ボタンが表示される

### 5.4 チャット履歴表示
- [ ] 複数画像が横に並んで表示される
- [ ] 画像が適切なサイズで表示される
- [ ] 画像が多い場合にレイアウトが崩れない
- [ ] 過去の会話の画像も正しく表示される

---

## 6️⃣ エラーハンドリング

### 6.1 ファイルサイズ制限
- [ ] 大きすぎるファイルを添付した場合のエラー表示
- [ ] 複数の大きいファイルを添付した場合の挙動

### 6.2 ファイル形式エラー
- [ ] 非対応形式のファイルを添付した場合
- [ ] 破損したファイルを添付した場合

### 6.3 ネットワークエラー
- [ ] アップロード中に接続が切れた場合
- [ ] GCSへのアップロード失敗時のエラー表示
- [ ] テキスト抽出失敗時のエラー表示

### 6.4 API制限
- [ ] モデルの利用上限に達した場合のエラー表示
- [ ] レート制限に達した場合の挙動

---

## 7️⃣ パフォーマンステスト

### 7.1 レスポンス速度
- [ ] 1ファイル添付時の処理速度
- [ ] 3ファイル添付時の処理速度
- [ ] 5ファイル以上添付時の処理速度
- [ ] 大きな画像ファイル複数の処理速度

### 7.2 メモリリーク確認
- [ ] 複数回ファイルを添付・削除してもメモリが増え続けない
- [ ] ページをリロードせずに長時間使用できる
- [ ] 会話をクリアした際にメモリが解放される

---

## 8️⃣ 連続操作テスト

### 8.1 会話の継続
- [ ] 複数ファイルを添付して質問
- [ ] そのまま追加質問（ファイルなし）
- [ ] また別のファイルを添付して質問
- [ ] 会話の文脈が正しく保持される

### 8.2 モデル切り替え
- [ ] ファイルを添付した状態でモデルを変更
- [ ] 変更後も添付ファイルが保持される
- [ ] 異なるモデルで同じファイルを使って質問できる

### 8.3 設定変更
- [ ] ファイル添付 → Web検索ON → 送信
- [ ] ファイル添付 → 温度設定変更 → 送信
- [ ] ファイル添付 → システムプロンプト設定 → 送信

---

## 9️⃣ エッジケーステスト

### 9.1 極端なケース
- [ ] 0ファイル + テキストのみで送信
- [ ] 10ファイル以上を同時に添付
- [ ] 同じファイルを複数回添付
- [ ] ファイル名に特殊文字が含まれる場合
- [ ] ファイル名が非常に長い場合

### 9.2 ブラウザ互換性
- [ ] Chrome で動作確認
- [ ] Firefox で動作確認
- [ ] Edge で動作確認
- [ ] Safari で動作確認（Mac）

### 9.3 レスポンシブ対応
- [ ] デスクトップ表示で正しく動作
- [ ] タブレット表示で正しく動作
- [ ] スマートフォン表示で正しく動作

---

## 🔟 回帰テスト（既存機能）

### 10.1 既存機能に影響がないか
- [ ] 通常のテキストチャットが動作する
- [ ] モデル選択が正常に動作する
- [ ] システムプロンプト設定が効く
- [ ] 温度設定が反映される
- [ ] トークン数設定が反映される
- [ ] Web検索機能が単体で動作する
- [ ] 会話クリア機能が動作する
- [ ] コピー機能が動作する
- [ ] コードブロックのシンタックスハイライトが動作する

### 10.2 使用量トラッキング
- [ ] 複数ファイル添付時もコストが正しく記録される
- [ ] 月間制限が正しく判定される
- [ ] 使用量の警告が正しく表示される

---

## ✅ テスト結果サマリー

テスト実施日: ___________  
テスト実施者: ___________

| カテゴリ | 合格 | 不合格 | 未実施 | 備考 |
|---------|------|--------|--------|------|
| 1. 基本機能 | | | | |
| 2. モデル別 | | | | |
| 3. Web検索連携 | | | | |
| 4. ファイル形式 | | | | |
| 5. UI/UX | | | | |
| 6. エラーハンドリング | | | | |
| 7. パフォーマンス | | | | |
| 8. 連続操作 | | | | |
| 9. エッジケース | | | | |
| 10. 回帰テスト | | | | |

### 発見された問題

1. 
2. 
3. 

### 推奨される改善点

1. 
2. 
3. 

---

## 📝 テスト実施のヒント

### 優先度の高いテスト項目
1. **基本機能テスト（セクション1）** - 必ず全て実施
2. **主要モデルテスト** - GPT-5.1, Claude Sonnet 4.5, Gemini 2.5 Pro
3. **Web検索連携** - 主要モデルで最低1回ずつ
4. **エラーハンドリング** - ユーザー体験に直結

### テストデータの準備
- **画像**: サイズや解像度の異なる画像を複数用意
- **PDF**: テキストが多いPDF、画像が多いPDF
- **Excel**: データが多いもの、シンプルなもの
- **テキスト**: 日本語、英語、特殊文字を含むもの

### 効率的なテスト方法
1. まず基本機能を全てテスト
2. 次に使用頻度の高いモデルをテスト
3. エッジケースは最後に
4. 問題を発見したら即座に記録

---

**最終更新**: 2025-12-10
