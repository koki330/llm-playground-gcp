# LLM API Playground

AI モデルとの対話を可能にする高機能なWebアプリケーションです。Anthropic Claude と OpenAI GPT  geminiの三つのAPIをサポートし、マルチモーダルな入力（テキスト、画像、文書）に対応しています。

## 機能概要

### 対応AIモデル

**Anthropic Claude シリーズ**
- Claude 3.7 Sonnet (2025年2月) - 最新・最高性能モデル（200K トークンコンテキスト、最大180K トークン出力）
- Claude 3.5 Sonnet (2024年10月) - 高知能バランス型
- Claude 3.5 Haiku (2024年10月) - 超高速・高知能
- Claude 3 Opus (2024年2月) - 複雑タスク対応最強モデル
- Claude 3 Sonnet (2024年2月) - バランス型
- Claude 3 Haiku (2024年3月) - 高速・軽量

**OpenAI GPT シリーズ**
- GPT-4o - 最新マルチモーダルモデル
- GPT-4o mini - 軽量・高速版
- GPT-3.5 Turbo - コスト効率重視
- O1 - 推論特化モデル
- O3-mini - 軽量推論モデル

**Geminiシリーズ**
 - Gemini2.5pro
 - Gemini2.5Flash
 - Gemini1.5pro
 - Gemini1.5Flash

### 主要機能

**マルチモーダル対応**
- テキスト入力・出力
- 画像アップロード・解析（JPEG、PNG、GIF）
- 文書処理（PDF、DOCX、TXT、XLSX、Markdown、JSON）
- 自動テキスト抽出（日本語文字エンコーディング対応）

**高度なファイル処理**
- 最大500MBファイルアップロード対応
- Excel全シート処理
- PDFテキスト抽出
- 日本語文字エンコーディング自動検出（UTF-8、Shift-JIS）
- 大容量ファイル自動分割（前100K文字＋後50K文字保持）

**ユーザーインターフェース**
- レスポンシブデザイン（モバイル、タブレット、デスクトップ対応）
- ダークモード・ライトモード切り替え
- 会話履歴管理
- システムプロンプト設定
- 長文表示対応（最大50,000文字表示）
- ドラッグ&ドロップファイルアップロード

**セキュリティ**
- IP制限機能（iboss エンドポイント対応）
- 環境変数による設定管理
- APIキー状態監視

### アーキテクチャ

GCPでのデプロイを想定

## API設定詳細

### トークン制限設定
- **一般モデル**: 最大10,000トークン出力
- **Claude 3.7**: 最大180,000トークン出力（200Kコンテキスト活用）
- **O1/O3シリーズ**: 専用パラメータ対応

### レスポンス処理
- Anthropic: `content` 配列形式対応
- OpenAI: `choices[0].message.content` 形式対応
- O1/O3: `max_completion_tokens` パラメータ対応

## セキュリティ機能


### 許可IP設定
特定のibossエンドポイントからのアクセスのみ許可：
- 東京: 136.228.243.51
- 関西: 149.19.34.162
- インド: 103.111.181.224
- 北米: 136.228.202.100

**マッチング方式**:
- **完全一致**: `136.228.243.51` など具体的なIPアドレス
- **プレフィックス一致**: `172.31.` など範囲指定（末尾ドット必須）

**環境別動作**:
- **開発環境**: IP制限無効化（localhost自動許可）
- **本番環境**: 厳密なIP制限適用

**セキュリティイベント監視**:

## ファイル処理機能（言語モデルごとに指定）

### 対応ファイル形式
- **画像**: JPEG、PNG、GIF（Base64エンコード）
- **文書**: PDF、DOCX、TXT、Markdown、JSON
- **表計算**: XLSX、XLS（全シート処理）

### 文字エンコーディング
- UTF-8優先、Shift-JIS自動フォールバック
- 日本語テキスト完全対応
- エンコーディングエラー回復機能

### ファイルサイズ処理
- 最大500MBアップロード対応
- 大容量ファイル自動分割
- メモリ効率的な処理